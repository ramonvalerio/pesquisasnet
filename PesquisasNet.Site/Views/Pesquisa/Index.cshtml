@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/LayoutSite.cshtml";
}

<p>http://jsfiddle.net/jlaw/BeL2V/3/</p>  

@if (ViewBag.Pesquisas != null)
{
    int contador = 0;
    int contador_limite = 4;

    for (int i = 0; i < ViewBag.Pesquisas.Count; i++)
    {
        if (contador == 0)
        {
            Html.Raw("<div class='row'>");
        }

        @*<a href="#myModal" role="button" class="btn" data-toggle="modal">Executar modal de demo</a>*@

        <div class="col-sm-6 col-md-3">
            
            <div class="thumbnail" onclick="exibirDetalhe('@ViewBag.Pesquisas[i].Codigo', '@ViewBag.Pesquisas[i].Titulo', '@ViewBag.Pesquisas[i].Texto', '@ViewBag.Pesquisas[i].ImagemPequena')" style="cursor:pointer;">
                @*<a href="~/Pesquisa/Detalhe/@ViewBag.Pesquisas[i].Codigo">*@
                <img class="img-responsive" src="http://file.pesquisasnet.com/img/pesquisa/@ViewBag.Pesquisas[i].ImagemPequena" alt="@ViewBag.Pesquisas[i].Titulo">
                @*</a>*@

                <div class="caption">
                    <h4>@ViewBag.Pesquisas[i].Titulo</h4>
                    <p>@ViewBag.Pesquisas[i].Resumo</p>
                </div>
            </div>
            
        </div>
    
        if (contador == contador_limite)
        {
            contador = 0;
            Html.Raw("</div>");
        }
    }
}

<!-- Modal -->
<div id="modal-content" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">×</button>
                <h3 id="titulo_detalhe"></h3>
            </div>
            <div class="modal-body">
                <img id="img-detalhe" />
                <p id="texto_detalhe">

                </p>
            </div>
            <div class="modal-footer">
                <a href="#" class="btn btn-danger" role="button" data-dismiss="modal">Fechar</a>
                <a href="#" class="btn btn-success" role="button">Participar</a>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">

    function exibirDetalhe(id, titulo, texto, imagem)
    {
        $(".thumbnail").click(function () {
            $("#modal-content").modal({
                show: true
            });
        });

        $("#titulo_detalhe").text(titulo);
        $("#texto_detalhe").text(texto);

        $("#img-detalhe").attr("src", 'http://file.pesquisasnet.com/img/pesquisa/' + imagem)
    }

</script>